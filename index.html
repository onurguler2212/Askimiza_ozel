<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>ğŸ’– ÅaÅŸÄ±rmak sana Ã§ok yakÄ±ÅŸÄ±yor</title>

  <style>
    :root{
      --bg1:#0b1026;
      --bg2:#2a0f1f;
      --stroke: rgba(255,255,255,.16);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.70);
      --accent2:#ffd1dc;
    }

    *{box-sizing:border-box;}

    /* âœ… KAYDIRMA SORUNU: body artÄ±k scroll alÄ±yor */
    body{
      margin:0;
      min-height:100svh;
      padding:24px 16px;
      color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background:
        radial-gradient(900px 600px at 15% 10%, rgba(255,77,136,.30), transparent 60%),
        radial-gradient(800px 520px at 85% 15%, rgba(255,209,220,.18), transparent 62%),
        radial-gradient(700px 520px at 50% 90%, rgba(140,70,255,.14), transparent 60%),
        linear-gradient(135deg,var(--bg1),var(--bg2));
      overflow-y:auto;   /* âœ… */
      overflow-x:hidden; /* âœ… */
    }

    .wrap{
      min-height: calc(100svh - 48px);
      display:flex;
      align-items:flex-start;
      justify-content:center;
    }

    /* parÄ±ltÄ± */
    .sparkle{
      position:fixed; inset:0;
      background-image:
        radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.55), transparent 60%),
        radial-gradient(1.5px 1.5px at 70% 20%, rgba(255,255,255,.45), transparent 60%),
        radial-gradient(1px 1px at 40% 80%, rgba(255,255,255,.35), transparent 60%),
        radial-gradient(1px 1px at 85% 70%, rgba(255,255,255,.25), transparent 60%);
      opacity:.7;
      animation: twinkle 6s ease-in-out infinite;
      pointer-events:none;
      z-index:0;
    }
    @keyframes twinkle{0%,100%{opacity:.55}50%{opacity:.85}}

    /* blur overlay */
    .overlay{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.22);
      backdrop-filter: blur(0px);
      -webkit-backdrop-filter: blur(0px);
      opacity:0;
      pointer-events:none;
      transition: opacity .25s ease, backdrop-filter .25s ease;
      z-index:1;
    }
    body.letter-open .overlay{
      opacity:1;
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      pointer-events:auto;
    }

    .card{
      width:min(560px, 100%);
      background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
      border:1px solid var(--stroke);
      border-radius:28px;
      padding:22px;
      box-shadow: 0 30px 90px rgba(0,0,0,.38);
      backdrop-filter: blur(12px);
      position:relative;
      z-index:2;
      margin: 0 auto;
    }

    .top{
      display:flex;
      justify-content:space-between;
      gap:12px;
      margin-bottom:10px;
      flex-wrap:wrap;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:999px;
      background: rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.14);
      color:var(--muted);
      font-size:13px;
    }
    .pill b{color:var(--text)}

    h1{
      margin:12px 0 10px;
      font-size: clamp(26px, 5vw, 36px);
      letter-spacing:.2px;
      text-align:center;
    }
    .subtitle{
      margin:0 auto 14px;
      max-width: 46ch;
      text-align:center;
      color:var(--muted);
      line-height:1.7;
      font-size: 15px;
    }
    .divider{
      height:1px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.25), transparent);
      margin: 14px 0 16px;
    }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    button{
      flex:1 1 180px;
      border:none;
      cursor:pointer;
      padding:12px 14px;
      border-radius:16px;
      font-size:15px;
      touch-action: manipulation;
      transition: transform .15s ease, filter .15s ease;
    }
    button:hover{transform: translateY(-1px); filter: brightness(1.03);}

    .primary{
      background: linear-gradient(135deg, var(--accent2), #fff);
      color:#1b0b12;
      box-shadow: 0 12px 30px rgba(0,0,0,.25);
    }
    .secondary{
      background: rgba(255,255,255,.10);
      color: var(--text);
      border:1px solid rgba(255,255,255,.18);
    }

    .hint{
      margin-top:10px;
      color: rgba(255,255,255,.68);
      font-size:12px;
      line-height:1.5;
      text-align:center;
    }

    /* =========================
       âœ‰ï¸ ZARF + KÃ‚ÄIT ANÄ°MASYONU
       ========================= */
    .letterStage{
      display:none;
      margin-top:16px;
      border-radius:24px;
      background: rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.14);
      padding:14px;
      animation: fadeUp .35s ease both;
    }

    .letterHeader{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom:10px;
      color:rgba(255,255,255,.80);
      font-size:13px;
    }
    .stamp{
      padding:6px 10px;
      border-radius:999px;
      background: rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.12);
      color:rgba(255,255,255,.80);
    }

    .envelope{
      position:relative;
      width:min(440px, 100%);
      margin: 8px auto 0;
      height: 190px;
    }

    /* zarf gÃ¶vdesi */
    .env-body{
      position:absolute;
      inset:0;
      border-radius:18px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.16);
      overflow:hidden;
      box-shadow: 0 18px 45px rgba(0,0,0,.25);
    }

    /* alt Ã¼Ã§gen */
    .env-bottom{
      position:absolute;
      left:0; right:0; bottom:0;
      height:0;
      border-left: 220px solid transparent;
      border-right:220px solid transparent;
      border-top: 110px solid rgba(255,255,255,.10);
      opacity:.9;
      transform: translateY(30px);
    }

    /* Ã¼st kapak (flap) */
    .env-flap{
      position:absolute;
      left:0; right:0; top:0;
      height:0;
      border-left: 220px solid transparent;
      border-right:220px solid transparent;
      border-bottom: 110px solid rgba(255,255,255,.14);
      transform-origin: top center;
      transform: rotateX(0deg);
      transition: transform .7s ease;
      filter: drop-shadow(0 8px 8px rgba(0,0,0,.2));
    }

    /* kÃ¢ÄŸÄ±t */
    .paper{
      position:absolute;
      left:12px; right:12px;
      bottom:14px;
      height: 150px;
      background: linear-gradient(180deg, rgba(255,255,255,.16), rgba(255,255,255,.10));
      border:1px solid rgba(255,255,255,.16);
      border-radius:14px;
      transform: translateY(70px);
      transition: transform .9s cubic-bezier(.2,.9,.2,1);
      overflow:hidden;
    }

    .paperInner{
      padding:14px 14px 16px;
      color: rgba(255,255,255,.92);
      line-height:1.85;
      font-size: 15px;
      height:100%;
      overflow:auto;
      scrollbar-width: thin;
    }

    /* typewriter alanÄ± */
    #typed{
      white-space: pre-wrap;
      word-break: break-word;
    }
    .cursor{
      display:inline-block;
      width:10px;
      margin-left:2px;
      color: rgba(255,255,255,.85);
      animation: blink 1s steps(1) infinite;
    }
    @keyframes blink{ 50%{opacity:0} }

    /* aÃ§Ä±kken animasyonlar */
    body.letter-open .env-flap{
      transform: rotateX(180deg);
    }
    body.letter-open .paper{
      transform: translateY(-8px);
    }

    .sign{
      margin-top:10px;
      opacity:.88;
      font-style: italic;
      text-align:right;
    }

    @keyframes fadeUp{
      from{opacity:0; transform: translateY(10px)}
      to{opacity:1; transform: translateY(0)}
    }

    /* kalpler */
    .heart{
      position:fixed;
      bottom:-24px;
      font-size:18px;
      animation: floatUp linear forwards;
      pointer-events:none;
      filter: drop-shadow(0 8px 10px rgba(0,0,0,.25));
      z-index:3;
    }
    @keyframes floatUp{
      from{ transform: translateY(0) translateX(0); opacity:0 }
      20%{ opacity:.95 }
      to{ transform: translateY(-120svh) translateX(var(--drift)); opacity:0 }
    }

    @media (max-width:420px){
      .card{padding:18px;border-radius:24px;}
      button{flex:1 1 100%;}
      .env-bottom, .env-flap{
        border-left-width: 170px;
        border-right-width: 170px;
      }
    }

    @media (prefers-reduced-motion: reduce){
      .sparkle{animation:none}
      .heart{animation:none}
      .cursor{animation:none}
      .env-flap, .paper{transition:none}
    }
  </style>
</head>

<body>
  <div class="sparkle"></div>
  <div class="overlay" id="overlay"></div>

  <div class="wrap">
    <div class="card">
      <div class="top">
        <div class="pill">ğŸ’Œ <b>Sevgililer GÃ¼nÃ¼</b> â€¢ Ä°lknurâ€™a</div>
        <div class="pill" id="musicStatus">ğŸµ MÃ¼zik: <b>KapalÄ±</b></div>
      </div>

      <h1>ÅaÅŸÄ±rmak sana Ã§ok yakÄ±ÅŸÄ±yor ğŸ’–</h1>
      <p class="subtitle">
        Bu kÃ¼Ã§Ã¼k sayfa; bir gÃ¼lÃ¼mseme, bir ÅŸarkÄ± ve kalbimden bir mektup.
      </p>

      <div class="divider"></div>

      <div class="actions">
        <button class="primary" id="playBtn">ğŸµ MÃ¼ziÄŸi BaÅŸlat</button>
        <button class="secondary" id="openLetterBtn">ğŸ’Œ Mektubu AÃ§</button>
        <button class="secondary" id="heartsBtn">â¤ Kalpleri YaÄŸdÄ±r</button>
      </div>

      <div class="hint">
        Telefonlar mÃ¼ziÄŸi otomatik baÅŸlatmaz. MÃ¼zik iÃ§in butona dokunman yeterli ğŸ§
      </div>

      <!-- âœ‰ï¸ Zarf sahnesi -->
      <div class="letterStage" id="letterStage">
        <div class="letterHeader">
          <span>ğŸ“œ Mektubum</span>
          <span class="stamp">25.08.2024 â†’ sonsuza</span>
        </div>

        <div class="envelope">
          <div class="env-body">
            <div class="env-bottom"></div>
            <div class="paper" id="paper">
              <div class="paperInner">
                <span id="typed"></span><span class="cursor" id="cursor">|</span>
                <div class="sign">â€” Sana Ã§ok Ã¢ÅŸÄ±k olan adam</div>
              </div>
            </div>
            <div class="env-flap"></div>
          </div>
        </div>
      </div>

      <!-- Mobil uyumlu mÃ¼zik -->
      <audio id="bgm" loop muted playsinline preload="auto">
        <source src="hanimefendi.mp3" type="audio/mpeg">
      </audio>
    </div>
  </div>

  <script>
    const bgm = document.getElementById("bgm");
    const playBtn = document.getElementById("playBtn");
    const musicStatus = document.getElementById("musicStatus");
    const openLetterBtn = document.getElementById("openLetterBtn");
    const heartsBtn = document.getElementById("heartsBtn");
    const overlay = document.getElementById("overlay");

    const letterStage = document.getElementById("letterStage");
    const typed = document.getElementById("typed");
    const cursor = document.getElementById("cursor");

    let playing = false;
    let typing = false;
    let typeTimer = null;

    const letterText =
`BugÃ¼n Sevgililer GÃ¼nÃ¼ymÃ¼ÅŸâ€¦

Ama benim iÃ§in 25 AÄŸustos 2024â€™ten beri her gÃ¼n Sevgililer GÃ¼nÃ¼.
Her gÃ¼nÃ¼m ayrÄ± heyecanlÄ±, her anÄ±m ayrÄ± huzurluâ€¦

Her geÃ§en gÃ¼n sana biraz daha Ã¢ÅŸÄ±k oluyorum.
Her gÃ¼n kendimi seninle biraz daha aÅŸÄ±yorum.
Her seferinde seni ÅŸaÅŸÄ±rtmayÄ± Ã§ok seviyorumâ€¦

Bu mesajÄ± okurkenki o tatlÄ± gÃ¼lÃ¼msemeni,
bir sonraki cÃ¼mlede ne yazÄ±yor diye merakla pÄ±rpÄ±r Ã§arpan kalbini duymayÄ± Ã§ok seviyorum.

Sen iyi ki hayatÄ±ma girdin, iyi ki hayatÄ±mÄ±n neÅŸesi oldun.
Sen sevginin en gÃ¼zel halisin ve iyi ki benimsin.

SENÄ° Ã‡OOO..OOOKK SEVÄ°YORUM.. ğŸ’–`;

    function setMusicUI(){
      musicStatus.innerHTML = `ğŸµ MÃ¼zik: <b>${playing ? "AÃ§Ä±k" : "KapalÄ±"}</b>`;
      playBtn.textContent = playing ? "â¸ MÃ¼ziÄŸi Durdur" : "ğŸµ MÃ¼ziÄŸi BaÅŸlat";
    }

    async function toggleMusic(){
      try{
        if(!playing){
          bgm.muted = false;
          bgm.volume = 1.0;
          await bgm.play();
          playing = true;
        }else{
          bgm.pause();
          playing = false;
        }
        setMusicUI();
      }catch(e){
        alert("ğŸ”Š MÃ¼zik baÅŸlamadÄ±. LÃ¼tfen bir kez daha dokun ğŸ’–");
      }
    }

    function spawnHearts(count){
      for(let i=0;i<count;i++){
        const h=document.createElement("div");
        h.className="heart";
        h.textContent = Math.random() > 0.25 ? "â¤" : "ğŸ¤";
        h.style.left = Math.random()*100 + "vw";
        h.style.setProperty("--drift", (Math.random()*120 - 60) + "px");
        h.style.animationDuration = (Math.random()*3 + 4) + "s";
        document.body.appendChild(h);
        setTimeout(()=>h.remove(), 8000);
      }
    }

    function typeWords(text){
      if(typing) return;
      typing = true;

      typed.textContent = "";
      cursor.style.display = "inline-block";

      const tokens = text.split(/(\s+)/); // boÅŸluklarÄ± korur
      let i = 0;

      const speed = 28;

      function step(){
        // kapanÄ±rsa durdur
        if(!document.body.classList.contains("letter-open")){
          typing = false;
          cursor.style.display = "none";
          clearTimeout(typeTimer);
          return;
        }

        if(i < tokens.length){
          typed.textContent += tokens[i];
          i++;
          const jitter = Math.random() * 22;
          typeTimer = setTimeout(step, speed + jitter);
        }else{
          typing = false;
        }
      }
      step();
    }

    function openLetter(){
      letterStage.style.display = "block";
      document.body.classList.add("letter-open");
      openLetterBtn.textContent = "âœ– Mektubu Kapat";

      // zarf/kÃ¢ÄŸÄ±t animasyonu + yazÄ±
      spawnHearts(10);
      typeWords(letterText);

      // mektup sahnesine kaydÄ±r (telefon iÃ§in)
      setTimeout(()=>{
        letterStage.scrollIntoView({behavior:"smooth", block:"start"});
      }, 200);
    }

    function closeLetter(){
      document.body.classList.remove("letter-open");
      openLetterBtn.textContent = "ğŸ’Œ Mektubu AÃ§";

      typing = false;
      clearTimeout(typeTimer);
      cursor.style.display = "none";

      // sahneyi kapat
      setTimeout(()=>{ letterStage.style.display = "none"; }, 200);
    }

    function toggleLetter(){
      const isOpen = document.body.classList.contains("letter-open");
      if(isOpen) closeLetter();
      else openLetter();
    }

    overlay.addEventListener("click", closeLetter);

    playBtn.addEventListener("click", toggleMusic);
    openLetterBtn.addEventListener("click", toggleLetter);
    heartsBtn.addEventListener("click", ()=>spawnHearts(18));

    window.addEventListener("load", ()=>{
      setMusicUI();
      spawnHearts(6);
    });
  </script>
</body>
</html>
